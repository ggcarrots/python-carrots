<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml" lang="en_GB">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Classes &mdash; Code Carrots</title>
    
    <link rel="stylesheet" href="_static/carrots.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '3.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="Code Carrots" href="index.html" />
    <link rel="next" title="Going Further" href="going_further.html" />
    <link rel="prev" title="Tic Tac Toe" href="loops_functions.html" /> 
  </head>
  <body role="document">
  
  

    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="going_further.html" title="Going Further"
             accesskey="N">next</a></li>
        <li class="right" >
          <a href="loops_functions.html" title="Tic Tac Toe"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Code Carrots</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="classes">
<h1>Classes<a class="headerlink" href="#classes" title="Permalink to this headline">¶</a></h1>
<div class="section" id="define-classes">
<h2>Define classes<a class="headerlink" href="#define-classes" title="Permalink to this headline">¶</a></h2>
<p>Classes like <code class="docutils literal"><span class="pre">int</span></code> or <code class="docutils literal"><span class="pre">str</span></code> are already known to Python, but we can create our own types.
This is called defining a class.</p>
<p>You can define your class as easy as you can define a function. In fact, a class is
basically nothing but a group of functions. Let&#8217;s define a class named <code class="docutils literal"><span class="pre">TicTacToeBoard</span></code>,
and give it a method that will print an empty board.
We&#8217;ve already coded it in the last chapter;
now we just make it into a method.</p>
<div class="code python highlight-default"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">TicTacToeBoard</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">plot</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="k">def</span> <span class="nf">draw_board_row</span><span class="p">(</span><span class="n">last_line</span><span class="p">,</span> <span class="n">letter</span><span class="p">):</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">f</span><span class="s1">&#39;  </span><span class="si">{line_middle}</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">f</span><span class="s1">&#39;</span><span class="si">{letter}</span><span class="s1"> </span><span class="si">{line_middle}</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">f</span><span class="s1">&#39;  </span><span class="si">{last_line}</span><span class="s1">&#39;</span><span class="p">)</span>

        <span class="n">line_middle</span> <span class="o">=</span> <span class="s1">&#39;     |     |     &#39;</span>
        <span class="n">line_bottom</span> <span class="o">=</span> <span class="s1">&#39;_____|_____|_____&#39;</span>
        <span class="n">letters</span> <span class="o">=</span> <span class="p">{</span><span class="mi">0</span><span class="p">:</span><span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">:</span><span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">:</span><span class="s1">&#39;C&#39;</span><span class="p">}</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;    1     2     3  &#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">row</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
                <span class="n">draw_board_row</span><span class="p">(</span><span class="n">line_middle</span><span class="p">,</span> <span class="n">letters</span><span class="p">[</span><span class="n">row</span><span class="p">])</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">draw_board_row</span><span class="p">(</span><span class="n">line_bottom</span><span class="p">,</span> <span class="n">letters</span><span class="p">[</span><span class="n">row</span><span class="p">])</span>
</pre></div>
</div>
<p>Class definitions begin with the word <a class="reference external" href="http://docs.python.org/3/reference/compound_stmts.html#class" title="(in Python v3.6)"><code class="xref std std-keyword docutils literal"><span class="pre">class</span></code></a>, after which we give the name of the new class.
The <code class="docutils literal"><span class="pre">(object)</span></code> indicates that our new type <code class="docutils literal"><span class="pre">TicTacToeBoard</span></code> is a specific sub-type of an <code class="docutils literal"><span class="pre">object</span></code> class.
That is, instances of our class, i.e. variables created from it, will be of the type <code class="docutils literal"><span class="pre">TicTacToeBoard</span></code> and
also of the more general type <code class="docutils literal"><span class="pre">object</span></code>.</p>
<p>This is another way of looking at the phrase <em>Everything in Python is an object</em>.
Each class is a specialization of <code class="docutils literal"><span class="pre">object</span></code> in Python. Every value has <code class="docutils literal"><span class="pre">object</span></code>
as the most general type. And so, because it is the default behaviour, we can actually ommit writing it:</p>
<div class="code python highlight-default"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">TicTacToeBoard</span><span class="p">:</span>
    <span class="c1"># ...</span>
</pre></div>
</div>
<p>We can create an instance of a class <code class="docutils literal"><span class="pre">TicTacToeBoard</span></code>. Let&#8217;s call it <code class="docutils literal"><span class="pre">my_board</span></code>.
We can check it&#8217;s type with <code class="xref py py-func docutils literal"><span class="pre">type()</span></code> function.
We can also ask if it&#8217;s an instance of a type <code class="docutils literal"><span class="pre">TicTacToeBoard</span></code>, <code class="docutils literal"><span class="pre">list</span></code>, <code class="docutils literal"><span class="pre">object</span></code> or whatever we like
using function <code class="docutils literal"><span class="pre">isinstance()</span></code>.</p>
<div class="code python highlight-default"><div class="highlight"><pre><span></span><span class="n">my_board</span> <span class="o">=</span> <span class="n">TicTacToeBoard</span><span class="p">()</span>
<span class="nb">type</span><span class="p">(</span><span class="n">my_board</span><span class="p">)</span>
<span class="nb">isinstance</span><span class="p">(</span><span class="n">my_board</span><span class="p">,</span> <span class="n">TicTacToeBoard</span><span class="p">)</span>
<span class="nb">isinstance</span><span class="p">(</span><span class="n">my_board</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span>
<span class="nb">isinstance</span><span class="p">(</span><span class="n">my_board</span><span class="p">,</span> <span class="nb">object</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-none"><div class="highlight"><pre><span></span>&lt;class &#39;__main__.TicTacToeBoard&#39;&gt;
True
False
True
</pre></div>
</div>
<p>As you can see, you create an instance of a class just like you call a function
by writing it&#8217;s name and then <code class="docutils literal"><span class="pre">()</span></code>.
(Spoiler: there can be some arguments in those brackets! But we will talk about it later.)
Every instance of <code class="docutils literal"><span class="pre">TicTacToeBoard</span></code>, like <code class="docutils literal"><span class="pre">my_board</span></code>, has all the methods that we defined in that class.
Here that would be just one method, called <code class="docutils literal"><span class="pre">plot</span></code>.
You may have noticed that it has one weird argument <code class="docutils literal"><span class="pre">self</span></code> that we don&#8217;t actually use in it.
It&#8217;s important to remember that every method in the class must have at least one argument.
Its value is an object from which we have called this method -
that would be some instance of the class. This argument should be called <code class="docutils literal"><span class="pre">self</span></code>
<a class="reference external" href="https://www.python.org/dev/peps/pep-0008/#function-and-method-arguments">by convention</a>
(technically you could call it otherwise, but other programmers would be angry with you if you did).
Let&#8217;s see how it works in practice:</p>
<div class="code python highlight-default"><div class="highlight"><pre><span></span><span class="n">my_board</span> <span class="o">=</span> <span class="n">TicTacToeBoard</span><span class="p">()</span>
<span class="n">my_board</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
</pre></div>
</div>
<p>As you can see, you don&#8217;t actually put any argument in the brackets while calling the method.
Rather, <code class="xref py py-func docutils literal"><span class="pre">plot()</span></code> uses the <code class="docutils literal"><span class="pre">TicTacToeBoard</span></code> instance that is before the dot.
The method knows that <code class="docutils literal"><span class="pre">my_board</span></code> should be its <code class="docutils literal"><span class="pre">self</span></code> argument.
Recall that we called some methods of lists and other objects the same way,
for example: <code class="docutils literal"><span class="pre">my_list.append(4)</span></code>.</p>
<p>The function <code class="xref py py-func docutils literal"><span class="pre">draw_board_row()</span></code>, on the other hand, doesn&#8217;t need the <code class="docutils literal"><span class="pre">self</span></code> argument.
It is not a method of a class;
notice we don&#8217;t call it on any instance of a class.
It is needed only in the <code class="docutils literal"><span class="pre">plot</span></code> method,
and it uses a variable defined in the <code class="docutils literal"><span class="pre">plot</span></code> method
(specifically <code class="docutils literal"><span class="pre">line_middle</span></code>);
it is more convenient for us to define it inside the <code class="docutils literal"><span class="pre">plot</span></code> method,
so that only <code class="xref py py-func docutils literal"><span class="pre">plot()</span></code> method sees it.
It&#8217;s just like with the variables in the functions:
you&#8217;ve seen in the last chapter, that Python cleans up after itself
and doesn&#8217;t store any variables defined inside the function after it&#8217;s been called.
Function <code class="xref py py-func docutils literal"><span class="pre">draw_board_row()</span></code> is no different: it&#8217;s just a variable.</p>
</div>
<div class="section" id="attributes-of-objects">
<h2>Attributes of objects<a class="headerlink" href="#attributes-of-objects" title="Permalink to this headline">¶</a></h2>
<p>Obviously, we don&#8217;t want our board to stay empty all the time.
We want to be able to place crosses and noughts on the instances of our new class.
We want our board to remember where the crosses and noughts were placed,
and print itself accordingly.
This can be accomplished by giving our <code class="docutils literal"><span class="pre">TicTacToeBoard</span></code> instance some <strong>attributes</strong> - values assigned
to this specific object.</p>
<div class="code python highlight-default"><div class="highlight"><pre><span></span><span class="n">my_board</span> <span class="o">=</span> <span class="n">TicTacToeBoard</span><span class="p">()</span>
<span class="n">my_board</span><span class="o">.</span><span class="n">crosses</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;A1&#39;</span><span class="p">,</span> <span class="s1">&#39;B2&#39;</span><span class="p">]</span>
<span class="n">my_board</span><span class="o">.</span><span class="n">noughts</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;A0&#39;</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">my_board</span><span class="o">.</span><span class="n">crosses</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">my_board</span><span class="o">.</span><span class="n">noughts</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-none"><div class="highlight"><pre><span></span>[&#39;A1&#39;, &#39;B2&#39;]
[&#39;A0&#39;]
</pre></div>
</div>
<p>Now our instance <code class="docutils literal"><span class="pre">my_board</span></code> has attributes <code class="docutils literal"><span class="pre">crosses</span></code> and <code class="docutils literal"><span class="pre">noughts</span></code>.
Just like previously, they both store list of srtings.
Every string describes coordinates where a nought or cross were placed.
As you can see, we can get to them by writing the name of our instance, a dot, and the name of an attribute.</p>
<p>In the previous chapter, we defined the lists of crosses and noughts as global variables.
That means if we wanted to play several games at once,
we would need to create different variables with different names for every board.
Now we store them as board&#8217;s attributes.
Values of the attributes are something specific to the instance of a class.
That means every <code class="docutils literal"><span class="pre">TicTacToeBoard</span></code> can have its own list of crosses and noughts,
and they will be independent from the lists of other instances of the same class.
If we create a new instance of the class <code class="docutils literal"><span class="pre">TicTacToeBoard</span></code>, it won&#8217;t have the defined attributes.
We can assign them to it, of course, and they can be different than attributes of <code class="docutils literal"><span class="pre">my_board</span></code>;
this won&#8217;t affect the attributes of <code class="docutils literal"><span class="pre">my_board</span></code>.
It&#8217;s just like when we create different lists: we can put different values into each of them.
Although they all are instances of the class <code class="docutils literal"><span class="pre">list</span></code>,
and have all the methods specific for the class <code class="docutils literal"><span class="pre">list</span></code>, each one is independent from another.</p>
<p>Observe:</p>
<div class="code python highlight-default"><div class="highlight"><pre><span></span><span class="n">my_new_board</span> <span class="o">=</span> <span class="n">TicTacToeBoard</span><span class="p">()</span>
<span class="n">my_new_board</span><span class="o">.</span><span class="n">noughts</span>
</pre></div>
</div>
<div class="highlight-none"><div class="highlight"><pre><span></span>---------------------------------------------------------------------------
AttributeError                            Traceback (most recent call last)
&lt;ipython-input-3-53eba1fc6abf&gt; in &lt;module&gt;()
----&gt; 1 my_new_board.noughts

AttributeError: TicTacToeBoard instance has no attribute &#39;noughts&#39;
</pre></div>
</div>
<div class="code python highlight-default"><div class="highlight"><pre><span></span><span class="n">my_new_board</span><span class="o">.</span><span class="n">noughts</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;A2&#39;</span><span class="p">,</span> <span class="s1">&#39;C2&#39;</span><span class="p">,</span> <span class="s1">&#39;B0&#39;</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">my_board</span><span class="o">.</span><span class="n">noughts</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">my_new_board</span><span class="o">.</span><span class="n">noughts</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-none"><div class="highlight"><pre><span></span>[&#39;A0&#39;]
[&#39;A2&#39;, &#39;C2&#39;, &#39;B0&#39;]
</pre></div>
</div>
<p>Now it would be nice if our boards could print the noughts and crosses that we put in them.
For that we need to modify the <code class="docutils literal"><span class="pre">plot</span></code> method.
It looks just like the code we&#8217;ve written in the last chapter, with some small changes (can you spot them?).</p>
<div class="code python highlight-default"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">TicTacToeBoard</span><span class="p">:</span>

    <span class="k">def</span> <span class="nf">get_field_content</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">address</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">address</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">noughts</span><span class="p">:</span>
            <span class="k">return</span> <span class="s1">&#39;O&#39;</span>
        <span class="k">elif</span> <span class="n">address</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">crosses</span><span class="p">:</span>
            <span class="k">return</span> <span class="s1">&#39;X&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="s1">&#39; &#39;</span>

    <span class="k">def</span> <span class="nf">plot</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="k">def</span> <span class="nf">draw_board_row</span><span class="p">(</span><span class="n">last_line</span><span class="p">,</span> <span class="n">letter</span><span class="p">):</span>
            <span class="n">symbol1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_field_content</span><span class="p">(</span><span class="n">letter</span> <span class="o">+</span> <span class="s1">&#39;1&#39;</span><span class="p">)</span>
            <span class="n">symbol2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_field_content</span><span class="p">(</span><span class="n">letter</span> <span class="o">+</span> <span class="s1">&#39;2&#39;</span><span class="p">)</span>
            <span class="n">symbol3</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_field_content</span><span class="p">(</span><span class="n">letter</span> <span class="o">+</span> <span class="s1">&#39;3&#39;</span><span class="p">)</span>

            <span class="nb">print</span><span class="p">(</span><span class="n">f</span><span class="s1">&#39;  </span><span class="si">{line_middle}</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">f</span><span class="s1">&#39;</span><span class="si">{letter}</span><span class="s1">   </span><span class="si">{symbol1}</span><span class="s1">  |  </span><span class="si">{symbol2}</span><span class="s1">  |  </span><span class="si">{symbol3}</span><span class="s1">  &#39;</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">f</span><span class="s1">&#39;  </span><span class="si">{last_line}</span><span class="s1">&#39;</span><span class="p">)</span>

        <span class="n">line_middle</span> <span class="o">=</span> <span class="s1">&#39;     |     |     &#39;</span>
        <span class="n">line_bottom</span> <span class="o">=</span> <span class="s1">&#39;_____|_____|_____&#39;</span>
        <span class="n">letters</span> <span class="o">=</span> <span class="p">{</span><span class="mi">0</span><span class="p">:</span><span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">:</span><span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">:</span><span class="s1">&#39;C&#39;</span><span class="p">}</span>

        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;    1     2     3  &#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">row</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
                <span class="n">draw_board_row</span><span class="p">(</span><span class="n">line_middle</span><span class="p">,</span> <span class="n">letters</span><span class="p">[</span><span class="n">row</span><span class="p">])</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">draw_board_row</span><span class="p">(</span><span class="n">line_bottom</span><span class="p">,</span> <span class="n">letters</span><span class="p">[</span><span class="n">row</span><span class="p">])</span>
</pre></div>
</div>
<p>Notice that we didn&#8217;t provide lists of positions of crosses or noughts as arguments,
nor did we create them inside any of the methods.
We just told python to use attributes of the instance that called the method.
Recall that the instance is passed as <code class="docutils literal"><span class="pre">self</span></code> argument,
even though while calling the method we don&#8217;t put the instance inside the parentheses. We put it before the dot.
So now the <cite>get_field_content`</cite> method, for every position, will check
if this position is in the attribute <code class="docutils literal"><span class="pre">crosses</span></code> of the instance that it has been called from.
The same with the attribute <code class="docutils literal"><span class="pre">noughts</span></code>.
Let&#8217;s see how it works:</p>
<div class="code python highlight-default"><div class="highlight"><pre><span></span><span class="n">my_board</span> <span class="o">=</span> <span class="n">TicTacToeBoard</span><span class="p">()</span>
<span class="n">my_board</span><span class="o">.</span><span class="n">crosses</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;A1&#39;</span><span class="p">,</span> <span class="s1">&#39;B0&#39;</span><span class="p">]</span>
<span class="n">my_board</span><span class="o">.</span><span class="n">noughts</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;C0&#39;</span><span class="p">,</span> <span class="s1">&#39;C1&#39;</span><span class="p">,</span> <span class="s1">&#39;C2&#39;</span><span class="p">]</span>
<span class="n">my_board</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
</pre></div>
</div>
<p>Great, now we have a way to plot crosses and noughts on our board!
But what if we forgot to define these attributes?
The <code class="docutils literal"><span class="pre">plot()</span></code> method wouldn&#8217;t know what <code class="docutils literal"><span class="pre">self.noughts</span></code> or <code class="docutils literal"><span class="pre">self.crosses</span></code> are.
It won&#8217;t even print an empty board, just return an error.
It would be better to assure that every instance of our class has these attributes.
Is there a way to do that? Yes!
We can define attributes of an object when it is created.
We need to tell Python that we want some specific stuff to happen
(in this case, we want to create some attributes)
when we initialise an instance of a <code class="docutils literal"><span class="pre">TicTacToeBoard</span></code>.
We do that by adding a method <code class="docutils literal"><span class="pre">__init__</span></code> to the definition of the class.
It&#8217;s a method that is called when an object is created; that&#8217;s why it&#8217;s called a <strong>constructor</strong>.
Actually, every class has this method defined, even if we don&#8217;t do it ourselves.
So, when we typed <code class="docutils literal"><span class="pre">my_board</span> <span class="pre">=</span> <span class="pre">TicTacToeBoard()</span></code> python actually called a method <code class="docutils literal"><span class="pre">__init__</span></code> of a class <code class="docutils literal"><span class="pre">TicTacToeBoard</span></code>.
We can define it ourselves and add what we need.</p>
<div class="code python highlight-default"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">TicTacToeBoard</span><span class="p">:</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">crosses</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">noughts</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="c1"># all the rest of the methods</span>
    <span class="c1"># ...</span>
</pre></div>
</div>
<p>Now every time we create a new instance of the class TicTacToeBoard,
it already has the attributes <code class="docutils literal"><span class="pre">crosses</span></code> and <code class="docutils literal"><span class="pre">noughts</span></code> -
empty lists, ready to be filled.
Note that the constructor also needs the <code class="docutils literal"><span class="pre">self</span></code> argument,
even if we don&#8217;t provide it neither inside the brackets, nor before the dot.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">It&#8217;s worth noting that it is highly discouraged to do what we did before:
to add some attributes that weren&#8217;t defined in the constructor.
Usually we assume that whoever created some class, she knew what she was doing:
she gave it all the methods and all the attributes it needs to fulfil it&#8217;s function.
So if we need to add some attributes, maybe we&#8217;re not using it correctly;
or maybe we should correct the definition of the class.
But we didn&#8217;t know it previously, so it&#8217;s okay; let&#8217;s hope no one tells Python police.</p>
</div>
<p>It is not a good idea to modify attributes like we did.
Notice that attributes <code class="docutils literal"><span class="pre">crosses</span></code> and <code class="docutils literal"><span class="pre">noughts</span></code> need to be lists of strings
to make the plotting method work properly.
If we by mistake set <code class="docutils literal"><span class="pre">crosses</span></code> to something else, like a string &#8220;A1 B2 C0&#8221;,
we would get an error at some point (can you point where, exactly?).
If some attributes need to be modified somewhere in the code
it&#8217;s a better idea to define special methods that will modify them.
That way we can control what we put in our attributes.
So, let&#8217;s do it!</p>
<div class="code python highlight-default"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">TicTacToeBoard</span><span class="p">:</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">crosses</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">noughts</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">def</span> <span class="nf">add_cross</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">address</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">crosses</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">address</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">add_nought</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">address</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">noughts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">address</span><span class="p">)</span>

    <span class="c1"># nothing changes in the other methods</span>
</pre></div>
</div>
<p><strong>Additional task</strong>: modify the method that adds a cross,
so that it will check whether it is a legal move.
That is, whether the address is formatted properly (&#8220;A2&#8221;, not &#8220;A 2&#8221;, [&#8216;A&#8217;, 2] or &#8220;Please put it on A2 field&#8221;),
is inside the board and the field is free.
Do the same for the <code class="docutils literal"><span class="pre">add_nought()</span></code> method.</p>
<p>Now we can finnally create a simple game using our class <code class="docutils literal"><span class="pre">TicTacToeBoard</span></code>:</p>
<div class="code python highlight-default"><div class="highlight"><pre><span></span><span class="n">board</span> <span class="o">=</span> <span class="n">TicTacToeBoard</span><span class="p">()</span>
<span class="n">current_move</span> <span class="o">=</span> <span class="s1">&#39;O&#39;</span>
<span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
    <span class="n">board</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
    <span class="n">user_move</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Please input your next move: &#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">current_move</span> <span class="o">==</span> <span class="s1">&#39;O&#39;</span><span class="p">:</span>
        <span class="n">board</span><span class="o">.</span><span class="n">add_nought</span><span class="p">(</span><span class="n">user_move</span><span class="p">)</span>
        <span class="n">current_move</span> <span class="o">=</span> <span class="s1">&#39;X&#39;</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">board</span><span class="o">.</span><span class="n">add_cross</span><span class="p">(</span><span class="n">user_move</span><span class="p">)</span>
        <span class="n">current_move</span> <span class="o">=</span> <span class="s1">&#39;O&#39;</span>
</pre></div>
</div>
<p>...And so we&#8217;ve managed to recreate the game from the previous chapter, but now using classes
(one could even say, in a more <em>classy</em> way).
Of course still the game goes on forever.
Let&#8217;s put <code class="docutils literal"><span class="pre">board</span></code> in charge of checking whether the game should end or not.
(We will write here only the fragments of code that are new or changed.)</p>
<div class="code python highlight-default"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">TicTacToeBoard</span><span class="p">:</span>

    <span class="k">def</span> <span class="nf">check</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        check whether the game is won by some player</span>
<span class="sd">        return True if so, False otherwise</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">potential_wins</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">potential_wins</span><span class="o">.</span><span class="n">extend</span><span class="p">([[</span><span class="n">letter</span><span class="o">+</span><span class="n">column</span> <span class="k">for</span> <span class="n">letter</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="s1">&#39;C&#39;</span><span class="p">)]</span>
            <span class="k">for</span> <span class="n">column</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">)])</span>    <span class="c1"># vertical win</span>
        <span class="n">potential_wins</span><span class="o">.</span><span class="n">extend</span><span class="p">([[</span><span class="n">letter</span><span class="o">+</span><span class="n">column</span> <span class="k">for</span> <span class="n">column</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">)]</span>
            <span class="k">for</span> <span class="n">letter</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="s1">&#39;C&#39;</span><span class="p">)])</span>    <span class="c1"># horizontal win</span>
        <span class="n">potential_wins</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="s1">&#39;A0&#39;</span><span class="p">,</span> <span class="s1">&#39;B1&#39;</span><span class="p">,</span> <span class="s1">&#39;C2&#39;</span><span class="p">])</span>
        <span class="n">potential_wins</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="s1">&#39;A2&#39;</span><span class="p">,</span> <span class="s1">&#39;B1&#39;</span><span class="p">,</span> <span class="s1">&#39;C0&#39;</span><span class="p">])</span>
        <span class="c1"># diagonal win</span>
        <span class="k">for</span> <span class="n">win</span> <span class="ow">in</span> <span class="n">potential_wins</span><span class="p">:</span>
            <span class="k">if</span> <span class="p">(</span><span class="nb">all</span><span class="p">([</span><span class="n">field</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">noughts</span> <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="n">win</span><span class="p">])</span> <span class="ow">or</span>
                <span class="nb">all</span><span class="p">([</span><span class="n">field</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">crosses</span> <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="n">win</span><span class="p">])):</span>
                <span class="k">return</span> <span class="kc">True</span>
        <span class="k">return</span> <span class="kc">False</span>

<span class="n">board</span> <span class="o">=</span> <span class="n">TicTacToeBoard</span><span class="p">()</span>
<span class="n">should_the_game_end</span> <span class="o">=</span> <span class="kc">False</span>
<span class="n">current_move</span> <span class="o">=</span> <span class="s1">&#39;O&#39;</span>
<span class="k">while</span> <span class="ow">not</span> <span class="n">should_game_end</span><span class="p">:</span>
    <span class="n">board</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
    <span class="n">user_move</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Please input your next move: &#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">current_move</span> <span class="o">==</span> <span class="s1">&#39;O&#39;</span><span class="p">:</span>
        <span class="n">board</span><span class="o">.</span><span class="n">add_nought</span><span class="p">(</span><span class="n">user_move</span><span class="p">)</span>
        <span class="n">current_move</span> <span class="o">=</span> <span class="s1">&#39;X&#39;</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">board</span><span class="o">.</span><span class="n">add_cross</span><span class="p">(</span><span class="n">user_move</span><span class="p">)</span>
        <span class="n">current_move</span> <span class="o">=</span> <span class="s1">&#39;O&#39;</span>
    <span class="n">should_game_end</span> <span class="o">=</span> <span class="n">board</span><span class="o">.</span><span class="n">check</span><span class="p">()</span>
</pre></div>
</div>
<p><strong>Additional task</strong>: the game should also end when the board is full.
Add that to the <code class="docutils literal"><span class="pre">check</span></code> method.</p>
<p>Couple of things require explanation.
First, the comment below the name of the method <code class="docutils literal"><span class="pre">check</span></code>.
It&#8217;s called a docstring, because it&#8217;s a string that documents something -
in this case, a method.
It&#8217;s a good habit to add docstrings to your functions, methods or classes,
to help everyone (including yourself!) understand what they are doing and how to use them.
Second thing: there is a new way of using <code class="docutils literal"><span class="pre">for</span></code> statement.
It&#8217;s called <code class="docutils literal"><span class="pre">list</span> <span class="pre">comprehension</span></code>, and it is very similar to the regular <code class="docutils literal"><span class="pre">for</span></code> loop.
The following two <code class="docutils literal"><span class="pre">for</span></code>&#8216;s will do exactly the same thing:</p>
<div class="code python highlight-default"><div class="highlight"><pre><span></span><span class="c1"># first version</span>
<span class="n">my_list</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">):</span>
    <span class="n">my_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">i</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span>

<span class="c1"># second version</span>
<span class="n">my_list</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span><span class="o">**</span><span class="mi">2</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">)]</span>
</pre></div>
</div>
<p>And finally the last thing: the <code class="docutils literal"><span class="pre">all</span></code> function.
It&#8217;s a function that checks whether all the elements in the list, tuple or anything else iterable are True.
Here is a couple of examples:</p>
<p>To sum up:
<code class="docutils literal"><span class="pre">check</span></code> method creates a list of potential wins.
Each potential win is a list of addresses that imply a player wins, if she has her pawns on all these adresses.
For example <code class="docutils literal"><span class="pre">[&quot;A0&quot;,</span> <span class="pre">&quot;B1&quot;,</span> <span class="pre">&quot;C2&quot;]</span></code> is a potential win - those are the addresses of the diagonal.
Next, <code class="docutils literal"><span class="pre">check</span></code> checks for every win,
whether all the addresses from this win are in <code class="docutils literal"><span class="pre">self.noughts</span></code> or <code class="docutils literal"><span class="pre">self.crosses</span></code>.
If so, it returns True and that&#8217;s it;
if a method returns something, it ends.
If it goes through the whole loop and finds nothing, it eventually returns False at the end.</p>
<p>Notice that in the <code class="docutils literal"><span class="pre">while</span></code> loop we do similar thing (placing a pawn) two times.
Also, if you added some checking if the move is legal,
you needed to put it in two different methods.
If we ever decide to do some small change, we need to do it in two places.
It seems like a lot of unnecessary work and is error-prone.
And furthermore, <code class="docutils literal"><span class="pre">check</span></code> method generates the lists of potential wins after every move,
which is a waste of time - after all, the list stays the same throughout the whole game.
Let&#8217;s modify this code so that it will look more elegant:</p>
<div class="code python highlight-default"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">TicTacToeBoard</span><span class="p">:</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pawns</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;O&#39;</span><span class="p">:[],</span> <span class="s1">&#39;X&#39;</span><span class="p">:[]}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">potential_wins</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">generate_potential_wins</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">add_pawn</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pawn</span><span class="p">,</span> <span class="n">address</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pawns</span><span class="p">[</span><span class="n">pawn</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">address</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_field_content</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">address</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">pawn</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">pawns</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">address</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">pawns</span><span class="p">[</span><span class="n">pawn</span><span class="p">]:</span>
                <span class="k">return</span> <span class="n">pawn</span>
        <span class="k">return</span> <span class="s1">&#39; &#39;</span>

    <span class="k">def</span> <span class="nf">generate_potential_wins</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">potential_wins</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">potential_wins</span><span class="o">.</span><span class="n">extend</span><span class="p">([[</span><span class="n">letter</span><span class="o">+</span><span class="n">column</span> <span class="k">for</span> <span class="n">letter</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="s1">&#39;C&#39;</span><span class="p">)]</span>
            <span class="k">for</span> <span class="n">column</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">)])</span>    <span class="c1"># vertical win</span>
        <span class="n">potential_wins</span><span class="o">.</span><span class="n">extend</span><span class="p">([[</span><span class="n">letter</span><span class="o">+</span><span class="n">column</span> <span class="k">for</span> <span class="n">column</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">)]</span>
            <span class="k">for</span> <span class="n">letter</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="s1">&#39;C&#39;</span><span class="p">)])</span>    <span class="c1"># horizontal win</span>
        <span class="n">potential_wins</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="s1">&#39;A0&#39;</span><span class="p">,</span> <span class="s1">&#39;B1&#39;</span><span class="p">,</span> <span class="s1">&#39;C2&#39;</span><span class="p">])</span>
        <span class="n">potential_wins</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="s1">&#39;A2&#39;</span><span class="p">,</span> <span class="s1">&#39;B1&#39;</span><span class="p">,</span> <span class="s1">&#39;C0&#39;</span><span class="p">])</span>
        <span class="c1"># diagonal win</span>
        <span class="k">return</span> <span class="n">potential_wins</span>

    <span class="k">def</span> <span class="nf">check</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        check whether the game is won by some player</span>
<span class="sd">        return True if so, False otherwise</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">win</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">potential_wins</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">fields</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">pawns</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
                <span class="k">if</span> <span class="nb">all</span><span class="p">([</span><span class="n">field</span> <span class="ow">in</span> <span class="n">fields</span> <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="n">win</span><span class="p">]):</span>
                    <span class="k">return</span> <span class="kc">True</span>
        <span class="k">return</span> <span class="kc">False</span>

<span class="n">board</span> <span class="o">=</span> <span class="n">TicTacToeBoard</span><span class="p">()</span>
<span class="n">should_the_game_end</span> <span class="o">=</span> <span class="kc">False</span>
<span class="n">who_next</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;O&#39;</span><span class="p">:</span><span class="s1">&#39;X&#39;</span><span class="p">,</span> <span class="s1">&#39;X&#39;</span><span class="p">:</span><span class="s1">&#39;O&#39;</span><span class="p">}</span>
<span class="n">current_move</span> <span class="o">=</span> <span class="s1">&#39;O&#39;</span>

<span class="k">while</span> <span class="ow">not</span> <span class="n">should_game_end</span><span class="p">:</span>
    <span class="n">board</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
    <span class="n">user_move</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Please input your next move (now &#39;</span> <span class="o">+</span> <span class="n">current_move</span> <span class="o">+</span> <span class="s1">&#39;is playing): &#39;</span><span class="p">)</span>
    <span class="n">board</span><span class="o">.</span><span class="n">add_pawn</span><span class="p">(</span><span class="n">current_move</span><span class="p">,</span> <span class="n">user_move</span><span class="p">)</span>
    <span class="n">should_game_end</span> <span class="o">=</span> <span class="n">board</span><span class="o">.</span><span class="n">check</span><span class="p">()</span>
    <span class="n">current_move</span> <span class="o">=</span> <span class="n">who_next</span><span class="p">[</span><span class="n">current_move</span><span class="p">]</span>
</pre></div>
</div>
<p><strong>Additional task</strong>:
modify the <code class="docutils literal"><span class="pre">check</span></code> method, so it will return who won the game.
Then, at the end, announce the winner.</p>
<p>Notice how we&#8217;ve dealt with changing the current player -
we&#8217;ve created a dictionary of pawns.
The keys are the pawns, ant the value for every pawn is the pawn moving after it.
At the end of the loop we just change the variable <code class="docutils literal"><span class="pre">current_move</span></code>
to the value held under the <code class="docutils literal"><span class="pre">current_move</span></code> in our dictionary.</p>
<p>We&#8217;ve also developed the prompt a little bit.
During the game players can forget whose turn it is, so now the prompt tells it. Great!
How about we change it even more, and use player&#8217;s name instead of her pawn?
Thanks to classes we can more easily store some informations about players, like their names,
and refer to them accordingly.
Let&#8217;s create a <code class="docutils literal"><span class="pre">Player</span></code> class:</p>
<div class="code python highlight-default"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Player</span><span class="p">:</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">pawn</span><span class="o">=</span><span class="s1">&#39;O&#39;</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pawn</span> <span class="o">=</span> <span class="n">pawn</span>
</pre></div>
</div>
<p>Notice that we added some arguments to the <code class="docutils literal"><span class="pre">__init__</span></code> method;
we provide values for them while creating an instance of the <code class="docutils literal"><span class="pre">Player</span></code> class.
Now when we create <code class="docutils literal"><span class="pre">Player</span></code> object, we can provide her name and the pawn she uses,
and they will be stored in its attributes <code class="docutils literal"><span class="pre">pawn</span></code> and <code class="docutils literal"><span class="pre">name</span></code>.
It&#8217;s okay if we don&#8217;t provide the pawn, because we defined some default value for it.
The <code class="docutils literal"><span class="pre">__init__</span></code> method called during the creation will assign the value of the argument <code class="docutils literal"><span class="pre">pawn</span></code>
to attribute <code class="docutils literal"><span class="pre">pawn</span></code> of newly created object (and the same for <code class="docutils literal"><span class="pre">name</span></code>).
These two names don&#8217;t have to be the same;
the <code class="docutils literal"><span class="pre">__init__</span></code> method can get an argument called <code class="docutils literal"><span class="pre">pawn</span></code>
and give it&#8217;s value to some attribute called <code class="docutils literal"><span class="pre">character_used_by_player</span></code>,
however when there is no need to call them differently, let&#8217;s not do that.
After all, they mean the same thing.</p>
<p>Now we can make our game a little bit nicer for the players:</p>
<div class="code python highlight-default"><div class="highlight"><pre><span></span><span class="n">board</span> <span class="o">=</span> <span class="n">TicTacToeBoard</span><span class="p">()</span>
<span class="n">players</span> <span class="o">=</span> <span class="p">[</span><span class="n">Player</span><span class="p">(</span><span class="s1">&#39;Loki&#39;</span><span class="p">,</span> <span class="s1">&#39;O&#39;</span><span class="p">),</span> <span class="n">Player</span><span class="p">(</span><span class="s1">&#39;Thor&#39;</span><span class="p">,</span> <span class="s1">&#39;X&#39;</span><span class="p">)]</span>
<span class="n">should_game_end</span> <span class="o">=</span> <span class="kc">False</span>
<span class="k">while</span> <span class="ow">not</span> <span class="n">should_game_end</span><span class="p">:</span>
    <span class="k">for</span> <span class="n">player</span> <span class="ow">in</span> <span class="n">players</span><span class="p">:</span>
        <span class="n">board</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
        <span class="n">user_move</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">&quot;Dear &quot;</span> <span class="o">+</span> <span class="n">player</span><span class="o">.</span><span class="n">name</span> <span class="o">+</span>
            <span class="s2">&quot;, where do you place your &#39;&quot;</span> <span class="o">+</span> <span class="n">player</span><span class="o">.</span><span class="n">pawn</span> <span class="o">+</span> <span class="s2">&quot;&#39;?&quot;</span><span class="p">)</span>
        <span class="n">board</span><span class="o">.</span><span class="n">add_pawn</span><span class="p">(</span><span class="n">player</span><span class="o">.</span><span class="n">pawn</span><span class="p">,</span> <span class="n">user_move</span><span class="p">)</span>
        <span class="n">should_game_end</span> <span class="o">=</span> <span class="n">board</span><span class="o">.</span><span class="n">check</span><span class="p">()</span>
</pre></div>
</div>
<p><strong>Additional task</strong>: Notice that now the game can only end after a second player&#8217;s move. (Can you see why?)
Modify the code above to fix that.</p>
<p>Now that we have a backbone of our game, we can develop it as we like:
we can store statistics of wins for every player,
ask for players&#8217; names at the beginning,
ask if they wish to play one more time,
allow them to choose their own pawns, different than &#8216;X&#8217; and &#8216;O&#8217;...
Sky is the limit!</p>
</div>
<div class="section" id="inheritance">
<h2>Inheritance<a class="headerlink" href="#inheritance" title="Permalink to this headline">¶</a></h2>
<p>Let&#8217;s say we got bored with tic-tac-toe and want to write a new game - Connect Four.
It&#8217;s different from tic-tac-toe, of course, but it has some simmilarities:
two players move in turns, by placing some pawns on the board.
The goal is to have some number of pawns in one line.
Board can be printed in a simmilar manner, even though it has different size
(Connect Four is played on a board with 6 rows and 7 columns).
The whole game menu could be essentially the same.
What shall we do? Write it all from the scratch?
That would be a waste of time.
Maybe copy it all and just change the bits that we want to be different?
That would be a bad habit.
What if we want to change it later, for example - we have an idea how to improve printing of the board?
We would have to change it in both game implementations.
It would be nice if we could implement it once and then just use it in two different games.
Can we do so? Of course! We can use class <strong>inheritance</strong>.</p>
<p>Let&#8217;s make our TicTacToeBoard more general.</p>
<div class="code python highlight-default"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Board</span><span class="p">:</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">nrow</span><span class="p">,</span> <span class="n">ncol</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nrow</span> <span class="o">=</span> <span class="n">nrow</span>    <span class="c1"># number of rows</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ncol</span> <span class="o">=</span> <span class="n">ncol</span>    <span class="c1"># number of columns</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pawns</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="k">def</span> <span class="nf">get_field_content</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">address</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">paw</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">pawns</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">address</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">pawns</span><span class="p">[</span><span class="n">pawn</span><span class="p">]:</span>
                <span class="k">return</span> <span class="n">pawn</span>
        <span class="k">return</span> <span class="s1">&#39; &#39;</span>

    <span class="k">def</span> <span class="nf">plot</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="k">def</span> <span class="nf">draw_board_row</span><span class="p">(</span><span class="n">last_line</span><span class="p">,</span> <span class="n">letter</span><span class="p">):</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">f</span><span class="s1">&#39;  </span><span class="si">{line_middle}</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">f</span><span class="s1">&#39;</span><span class="si">{letter}</span><span class="s1">  &#39;</span><span class="p">,</span> <span class="n">end</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">column</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ncol</span><span class="p">):</span>
                <span class="nb">print</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_field_content</span><span class="p">(</span><span class="n">letter</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">column</span><span class="p">),</span> <span class="n">end</span> <span class="o">=</span> <span class="s1">&#39;  |  &#39;</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">f</span><span class="s1">&#39;  </span><span class="si">{last_line}</span><span class="s1">&#39;</span><span class="p">)</span>

        <span class="n">line_middle</span> <span class="o">=</span> <span class="s1">&#39;     |     |     &#39;</span>
        <span class="n">line_bottom</span> <span class="o">=</span> <span class="s1">&#39;_____|_____|_____&#39;</span>
        <span class="n">letters</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">all_the_letters</span> <span class="o">=</span> <span class="s2">&quot;ABCDEFGHIJKLMNOPQRSTUVWXYZ&quot;</span>
        <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nrow</span><span class="p">):</span>
            <span class="n">letters</span><span class="p">[</span><span class="n">row</span><span class="p">]</span> <span class="o">=</span> <span class="n">all_the_letters</span><span class="p">[</span><span class="n">row</span><span class="p">]</span>

        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;    &#39;</span> <span class="o">+</span> <span class="s1">&#39;     &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ncol</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)])</span>
        <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nrow</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">row</span> <span class="o">==</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nrow</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span>
                <span class="n">draw_board_row</span><span class="p">(</span><span class="n">line_middle</span><span class="p">,</span> <span class="n">letters</span><span class="p">[</span><span class="n">row</span><span class="p">])</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">draw_board_row</span><span class="p">(</span><span class="n">line_bottom</span><span class="p">,</span> <span class="n">letters</span><span class="p">[</span><span class="n">row</span><span class="p">])</span>
</pre></div>
</div>
<p>Whoa, some new stuff appeared here.
Let&#8217;s go through it togheter.
Just like before, we will store pawns&#8217; positions as a dictionary in an attribute <code class="docutils literal"><span class="pre">pawns</span></code>.
We add two more attributes, describing size of our board.
We needed to change <code class="xref py py-func docutils literal"><span class="pre">draw_board_row()</span></code> a little:
now we don&#8217;t know how many columns there will be,
so we can&#8217;t just draw every row as consisting of three fields.
We used <code class="docutils literal"><span class="pre">for</span></code> loop to print in every row as many fields as there are columns.
We don&#8217;t know how many rows there will be, either;
this makes creating dictionary <code class="docutils literal"><span class="pre">letters</span></code> a little bit more complicated.
We create a long string with all the upper case letters
and then we fill the dictionary <code class="docutils literal"><span class="pre">letters</span></code> with them in a loop.
The last new thing is the <code class="xref py py-func docutils literal"><span class="pre">join()</span></code> method, called on a string with five spaces.
We join here numbers of the columns to create a header.
Again, we cannot just write the header explicitly, because we don&#8217;t know how many columns there will be.
Note that we created the list of numbers with this clever notation called list comprehension,
that you&#8217;ve seen in the <code class="docutils literal"><span class="pre">check</span></code> method.</p>
<p>Now our board can have any size, and can have any pawns placed on it.
Next we will define two classes: TicTacToeBoard and ConnectFourBoard.
They will both be subtypes, or subclasses of Board.</p>
<div class="code python highlight-default"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">TicTacToeBoard</span><span class="p">(</span><span class="n">Board</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ncols</span> <span class="o">=</span> <span class="mi">3</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nrows</span> <span class="o">=</span> <span class="mi">3</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pawns</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;O&#39;</span><span class="p">:[],</span> <span class="s1">&#39;X&#39;</span><span class="p">:[]}</span>

<span class="k">class</span> <span class="nc">ConnectFourBoard</span><span class="p">(</span><span class="n">Board</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ncols</span> <span class="o">=</span> <span class="mi">7</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nrows</span> <span class="o">=</span> <span class="mi">6</span>
</pre></div>
</div>
<p>Note the word <code class="docutils literal"><span class="pre">Board</span></code> in the brackets.
Now whenever we create an instance of class <code class="docutils literal"><span class="pre">TicTacToeBoard</span></code> it will be still an instance of <code class="docutils literal"><span class="pre">TicTacToeBoard</span></code>, of course,
but it will be also an instance of a more general class <code class="docutils literal"><span class="pre">Board</span></code>
(and of a class <code class="docutils literal"><span class="pre">object</span></code>, as a matter of fact).
The same goes for <code class="docutils literal"><span class="pre">ConnectFourBoard</span></code>.
We say that <code class="docutils literal"><span class="pre">Board</span></code> is a <strong>parent</strong> class of <code class="docutils literal"><span class="pre">TicTacToeBoard</span></code> and <code class="docutils literal"><span class="pre">ConnectFourBoard</span></code>,
and <code class="docutils literal"><span class="pre">TicTacToeBoard</span></code> and <code class="docutils literal"><span class="pre">ConnectFourBoard</span></code> are <strong>child</strong> classes of <code class="docutils literal"><span class="pre">Board</span></code>.
We can check it with <code class="docutils literal"><span class="pre">isinstance</span></code> function:</p>
<div class="code python highlight-default"><div class="highlight"><pre><span></span><span class="n">board</span> <span class="o">=</span> <span class="n">ConnectFourBoard</span><span class="p">()</span>
<span class="nb">isinstance</span><span class="p">(</span><span class="n">board</span><span class="p">,</span> <span class="n">ConnectFourBoard</span><span class="p">)</span>
<span class="nb">isinstance</span><span class="p">(</span><span class="n">board</span><span class="p">,</span> <span class="n">TicTacToeBoard</span><span class="p">)</span>
<span class="nb">isinstance</span><span class="p">(</span><span class="n">board</span><span class="p">,</span> <span class="n">Board</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-none"><div class="highlight"><pre><span></span>True
False
True
</pre></div>
</div>
<p>Note that it&#8217;s not anything new.
We already observed that everything in python is an instance of a class <code class="docutils literal"><span class="pre">object</span></code>.
We can create a list and it will be an instance of a class <code class="docutils literal"><span class="pre">list</span></code>, but also an instance of <code class="docutils literal"><span class="pre">object</span></code>.
In other words, <code class="docutils literal"><span class="pre">list</span></code> is a subtype of <code class="docutils literal"><span class="pre">object</span></code>.
Every type in python, including those that we define ourselves, like <code class="docutils literal"><span class="pre">Board</span></code> or <code class="docutils literal"><span class="pre">Player</span></code>, are subtypes of <code class="docutils literal"><span class="pre">object</span></code>.</p>
<p>Every instance of a class has all the methods defined in the definition of that class.
So far that meant that every <code class="docutils literal"><span class="pre">TicTacToeBoard</span></code> object has <code class="docutils literal"><span class="pre">plot</span></code> and <code class="docutils literal"><span class="pre">add_pawn</span></code> methods.
Now, after adding inheritance, every <code class="docutils literal"><span class="pre">TicTacToeBoard</span></code> object and every <code class="docutils literal"><span class="pre">ConnectFourBoard</span></code> object
has a <code class="docutils literal"><span class="pre">plot()</span></code> method, even though we don&#8217;t define it in them anymore.
They have all the methods defined in the <code class="docutils literal"><span class="pre">Board</span></code> class.
We say that classes <code class="docutils literal"><span class="pre">TicTacToeBoard</span></code> and <code class="docutils literal"><span class="pre">ConnectFourBoard</span></code> <strong>inherit</strong> the method <code class="docutils literal"><span class="pre">plot</span></code>.</p>
<p>Let&#8217;s see how it works in practice:</p>
<div class="code python highlight-default"><div class="highlight"><pre><span></span><span class="n">tic_tac_toe</span> <span class="o">=</span> <span class="n">TicTacToeBoard</span><span class="p">()</span>
<span class="n">connect4</span> <span class="o">=</span> <span class="n">ConnectFourBoard</span><span class="p">()</span>
<span class="n">some_small_board</span> <span class="o">=</span> <span class="n">Board</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Tic-tac-toe board:&quot;</span><span class="p">)</span>
<span class="n">tic_tac_toe</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Connect Four board:&quot;</span><span class="p">)</span>
<span class="n">connect4</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Some board:&quot;</span><span class="p">)</span>
<span class="n">some_small_board</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
</pre></div>
</div>
<p>It works!
Now every <code class="docutils literal"><span class="pre">TicTacToeBoard</span></code> will be a <code class="docutils literal"><span class="pre">Board</span></code>, and every <code class="docutils literal"><span class="pre">ConnectFourBoard</span></code> will be a <code class="docutils literal"><span class="pre">Board</span></code>,
but not every <code class="docutils literal"><span class="pre">Board</span></code> will be a <code class="docutils literal"><span class="pre">TicTacToeBoard</span></code> or a <code class="docutils literal"><span class="pre">ConnectFourBoard</span></code>.
Anything that we want to be shared by <code class="docutils literal"><span class="pre">TicTacToeBoard</span></code> and <code class="docutils literal"><span class="pre">ConnectFourBoard</span></code>  we store in <code class="docutils literal"><span class="pre">Board</span></code>.
Anything that should be specific to <code class="docutils literal"><span class="pre">TicTacToeBoard</span></code> or <code class="docutils literal"><span class="pre">ConnectFourBoard</span></code>, we store in <code class="docutils literal"><span class="pre">TicTacToeBoard</span></code> or <code class="docutils literal"><span class="pre">ConnectFourBoard</span></code>.</p>
<p><strong>Additional task</strong>: add a method <code class="docutils literal"><span class="pre">add_pawn(pawn,</span> <span class="pre">address)</span></code> to the <code class="docutils literal"><span class="pre">Board</span></code> class.</p>
<p>What about the method <code class="docutils literal"><span class="pre">__init__</span></code>, that appears in all the classes? Which one will be used during construction of an object?
Well, when we create an object <code class="docutils literal"><span class="pre">ConnectFourBoard</span></code>, its constructor will be evoked, not its parent&#8217;s.
The one inside the <code class="docutils literal"><span class="pre">Board</span></code> is more general, and would be used only if we define a sub-class of <code class="docutils literal"><span class="pre">Board</span></code> without its own <code class="docutils literal"><span class="pre">__init__</span></code> method.
Observe:</p>
<div class="code python highlight-default"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Some_Random_Board</span><span class="p">(</span><span class="n">Board</span><span class="p">):</span>
    <span class="k">pass</span>

<span class="n">really_big_board</span> <span class="o">=</span> <span class="n">Some_Random_Board</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="mi">30</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">really_big_board</span><span class="o">.</span><span class="n">nrow</span><span class="p">)</span>
</pre></div>
</div>
<p>The type <code class="docutils literal"><span class="pre">Some_Random_Board</span></code> is a subtype of <code class="docutils literal"><span class="pre">Board</span></code>, so any instance of class <code class="docutils literal"><span class="pre">Some_Random_Board</span></code> is also a <code class="docutils literal"><span class="pre">Board</span></code>.
When we created it, Python tried to use <code class="docutils literal"><span class="pre">__init__</span></code> method defined in <code class="docutils literal"><span class="pre">Some_Random_Board</span></code>,
but it didn&#8217;t find it there.
It moved then to the declaration of more general class, that is <code class="docutils literal"><span class="pre">Board</span></code>, and used its <code class="docutils literal"><span class="pre">__init__</span></code> method.
We say that <code class="docutils literal"><span class="pre">Some_Random_Board</span></code> class inherits the <code class="docutils literal"><span class="pre">__init__</span></code> method.
On the other hand, when we created <code class="docutils literal"><span class="pre">TicTacToeBoard</span></code>, python used constructor from <code class="docutils literal"><span class="pre">TicTacToeBoard</span></code>.
We didn&#8217;t have to provide <code class="docutils literal"><span class="pre">ncol</span></code> and <code class="docutils literal"><span class="pre">nrow</span></code> arguments, and python knew they should be equal to 3.</p>
<p>This has some important consequence: not all child classes must have all the methods from parent class exactly the same.
We&#8217;ve already seen that child classes of <code class="docutils literal"><span class="pre">Board</span></code> had different <code class="docutils literal"><span class="pre">__init__</span></code> methods.
We can create some other class, for example <code class="docutils literal"><span class="pre">Chessboard</span></code>, that will be a child of <code class="docutils literal"><span class="pre">Board</span></code>,
but will have it&#8217;s own, unique <code class="docutils literal"><span class="pre">plot</span></code> method, that will allow it to print black and white fields.
In such cases we say that <code class="docutils literal"><span class="pre">plot</span></code> method gets <strong>overridden</strong> in <code class="docutils literal"><span class="pre">Chessboard</span></code>.</p>
<p><strong>Additional task</strong>: Make the <code class="docutils literal"><span class="pre">add_pawn</span></code> method check whether the move is legal.
In the general class <code class="docutils literal"><span class="pre">Board</span></code> it means whether the move is formatted correctly, and wheter it&#8217;s inside the board, and that&#8217;s all.
Implement more specific cases for the other boards:
for <code class="docutils literal"><span class="pre">TicTacToeBoard</span></code>, it should also mean the field cannot be already taken
(it&#8217;s not always the case, for example in chess, so we shoudn&#8217;t put it in general class),
and for <code class="docutils literal"><span class="pre">ConnectFourBoard</span></code> it means we can&#8217;t place pawns if there is nothing below them
(Connect Four is actually played in a standing board, not a lying one, and the pawns fall down).
Try not to copy your code - if something is shared (like the condition &#8220;don&#8217;t put your pawn outside a board&#8221;) put it in the <code class="docutils literal"><span class="pre">Board</span></code> class.</p>
<p>The inheritance chain can be much longer than the one we created here.
We can create a class ThreeDimensionChessboard, that would inherit from the class Chessboard, that would inherit from class SquaredBoard, that would inherit from class Board.
Furthermore, it&#8217;s possible to inherit from more than one class.
The ThreeDimensionChessboard could inherit from both MultidimensionalBoard and Chessboard.
Bear in mind, however, that too complicated schemes of inheritance can be hard to understand, and therefore also hard to use.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <a href="index.html" class="logo"><img class="logo" src="_static/logo.png" style="width: 200px; height: 169px; margin: -10px 0 10px 0"></a>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="install.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="first_steps.html">Introduction to Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="intro_to_objects.html">Everything is an object</a></li>
<li class="toctree-l1"><a class="reference internal" href="basic_data_structures.html">Basic Data Structures</a></li>
<li class="toctree-l1"><a class="reference internal" href="loops_functions.html">Tic Tac Toe</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Classes</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#define-classes">Define classes</a></li>
<li class="toctree-l2"><a class="reference internal" href="#attributes-of-objects">Attributes of objects</a></li>
<li class="toctree-l2"><a class="reference internal" href="#inheritance">Inheritance</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="going_further.html">Going Further</a></li>
<li class="toctree-l1"><a class="reference internal" href="code_of_conduct.html">Geek Girls Carrots Code of Conduct</a></li>
</ul>

        </div>
      </div>
      <div class="clearer"></div>
    </div>
  <div class="footer">
    &copy; Copyright Code Carrots.
  </div>
  
  <a href="https://github.com/ggcarrots/python-carrots">
      <img style="position: absolute; top: 0; right: 0; border: 0;" src="https://camo.githubusercontent.com/652c5b9acfaddf3a9c326fa6bde407b87f7be0f4/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f6f72616e67655f6666373630302e706e67" alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_orange_ff7600.png">
  </a>
  </body>
</html>